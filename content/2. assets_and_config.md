# Flutter è³‡æºç®¡ç†èˆ‡é…ç½®æŒ‡å—

## ğŸ“ å°ˆæ¡ˆçµæ§‹æ¦‚è¦½

### æ¨™æº– Flutter å°ˆæ¡ˆç›®éŒ„çµæ§‹

```
my_flutter_app/
â”œâ”€â”€ android/                    # Android å¹³å°ç‰¹å®šè¨­å®š
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”‚   â”œâ”€â”€ AndroidManifest.xml
â”‚   â”‚   â”‚   â”œâ”€â”€ kotlin/
â”‚   â”‚   â”‚   â””â”€â”€ res/
â”‚   â”‚   â”‚       â”œâ”€â”€ drawable/   # Android åœ–ç¤ºå’Œåœ–ç‰‡
â”‚   â”‚   â”‚       â”œâ”€â”€ mipmap/     # æ‡‰ç”¨ç¨‹å¼åœ–ç¤º (å„ç¨®å°ºå¯¸)
â”‚   â”‚   â”‚       â””â”€â”€ values/     # å­—ä¸²ã€é¡è‰²ã€æ¨£å¼è¨­å®š
â”‚   â”‚   â””â”€â”€ build.gradle        # Android å»ºç½®è¨­å®š
â”‚   â””â”€â”€ gradle.properties       # Gradle å…¨åŸŸè¨­å®š
â”œâ”€â”€ ios/                        # iOS å¹³å°ç‰¹å®šè¨­å®š
â”‚   â”œâ”€â”€ Runner/
â”‚   â”‚   â”œâ”€â”€ Info.plist         # iOS æ‡‰ç”¨ç¨‹å¼è³‡è¨Š
â”‚   â”‚   â”œâ”€â”€ Assets.xcassets/   # iOS è³‡æºç›®éŒ„
â”‚   â”‚   â””â”€â”€ Runner.entitlements # iOS æ¬Šé™è¨­å®š
â”‚   â””â”€â”€ Runner.xcodeproj/      # Xcode å°ˆæ¡ˆæª”
â”œâ”€â”€ web/                        # Web å¹³å°è¨­å®š
â”‚   â”œâ”€â”€ index.html             # Web å…¥å£é é¢
â”‚   â”œâ”€â”€ manifest.json          # PWA è¨­å®š
â”‚   â””â”€â”€ icons/                 # Web åœ–ç¤º
â”œâ”€â”€ assets/                     # Flutter å…±ç”¨è³‡æº ğŸ“‚ é‡é»
â”‚   â”œâ”€â”€ images/                # åœ–ç‰‡è³‡æº
â”‚   â”œâ”€â”€ fonts/                 # å­—å‹æª”æ¡ˆ
â”‚   â”œâ”€â”€ data/                  # JSONã€CSV ç­‰è³‡æ–™æª”
â”‚   â”œâ”€â”€ animations/            # Lottie å‹•ç•«æª”
â”‚   â””â”€â”€ audio/                 # éŸ³æ•ˆæª”æ¡ˆ
â”œâ”€â”€ lib/                       # Dart ç¨‹å¼ç¢¼
â”œâ”€â”€ test/                      # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ pubspec.yaml              # å°ˆæ¡ˆé…ç½®æª” ğŸ”§ é—œéµ
â””â”€â”€ pubspec.lock              # å¥—ä»¶ç‰ˆæœ¬é–å®šæª”
```

------

## ğŸ–¼ï¸ åœ–ç‰‡è³‡æºç®¡ç†

### 1. åœ–ç‰‡ç›®éŒ„çµæ§‹

```
assets/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ app/                   # æ‡‰ç”¨ç¨‹å¼ç›¸é—œåœ–ç‰‡
â”‚   â”‚   â”œâ”€â”€ logo.png          # æ‡‰ç”¨ç¨‹å¼æ¨™èªŒ
â”‚   â”‚   â”œâ”€â”€ splash.png        # å•Ÿå‹•ç•«é¢
â”‚   â”‚   â””â”€â”€ placeholder.png   # ä½”ä½åœ–ç‰‡
â”‚   â”œâ”€â”€ icons/                # è‡ªè¨‚åœ–ç¤º
â”‚   â”‚   â”œâ”€â”€ home.png
â”‚   â”‚   â”œâ”€â”€ settings.png
â”‚   â”‚   â””â”€â”€ profile.png
â”‚   â”œâ”€â”€ ui/                   # UI å…ƒç´ 
â”‚   â”‚   â”œâ”€â”€ buttons/
â”‚   â”‚   â”œâ”€â”€ backgrounds/
â”‚   â”‚   â””â”€â”€ decorations/
â”‚   â”œâ”€â”€ content/              # å…§å®¹åœ–ç‰‡
â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”œâ”€â”€ avatars/
â”‚   â”‚   â””â”€â”€ banners/
â”‚   â””â”€â”€ animations/           # å‹•ç•«ç›¸é—œ
â”‚       â”œâ”€â”€ loading.gif
â”‚       â””â”€â”€ success.json      # Lottie å‹•ç•«
```

### 2. åœ–ç‰‡å‘½åè¦ç¯„

```
âœ… è‰¯å¥½çš„å‘½åæ–¹å¼ï¼š
- app_logo.png
- icon_home_active.png
- icon_home_inactive.png
- background_gradient_blue.png
- placeholder_user_avatar.png
- button_primary_normal.png
- button_primary_pressed.png

âŒ é¿å…çš„å‘½åæ–¹å¼ï¼š
- 1.png
- image.png
- åœ–ç‰‡1.png (é¿å…ä¸­æ–‡)
- My Image.png (é¿å…ç©ºæ ¼)
- MyImage.PNG (é¿å…å¤§å¯«å‰¯æª”å)
```

### 3. éŸ¿æ‡‰å¼åœ–ç‰‡ (å¤šè§£æåº¦æ”¯æ´)

```
assets/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ app_logo.png          # åŸºæº–åœ–ç‰‡ (1x)
â”‚   â”œâ”€â”€ 2.0x/
â”‚   â”‚   â””â”€â”€ app_logo.png      # é«˜è§£æåº¦ (2x)
â”‚   â”œâ”€â”€ 3.0x/
â”‚   â”‚   â””â”€â”€ app_logo.png      # è¶…é«˜è§£æåº¦ (3x)
â”‚   â””â”€â”€ 4.0x/
â”‚       â””â”€â”€ app_logo.png      # æ¥µé«˜è§£æåº¦ (4x)
```

### 4. pubspec.yaml ä¸­çš„åœ–ç‰‡é…ç½®

```yaml
flutter:
  assets:
    # åŒ…å«æ•´å€‹ç›®éŒ„
    - assets/images/
    - assets/icons/
    
    # åŒ…å«ç‰¹å®šæª”æ¡ˆ
    - assets/images/app_logo.png
    
    # åŒ…å«å­ç›®éŒ„
    - assets/images/ui/
    - assets/images/content/
    
    # æ”¯æ´å¤šè§£æåº¦
    - assets/images/app_logo.png  # è‡ªå‹•åŒ…å« 2.0x, 3.0x, 4.0x
```

### 5. ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨åœ–ç‰‡

```dart
// åŸºæœ¬åœ–ç‰‡è¼‰å…¥
Image.asset('assets/images/app_logo.png')

// å¸¶å¿«å–çš„ç¶²è·¯åœ–ç‰‡
Image.network(
  'https://example.com/image.jpg',
  loadingBuilder: (context, child, loadingProgress) {
    if (loadingProgress == null) return child;
    return CircularProgressIndicator();
  },
  errorBuilder: (context, error, stackTrace) {
    return Image.asset('assets/images/placeholder.png');
  },
)

// åœ“å½¢é ­åƒ
CircleAvatar(
  backgroundImage: AssetImage('assets/images/avatars/user1.png'),
  radius: 30,
)

// è‡ªè¨‚åœ–ç‰‡è¼‰å…¥ Widget
class AppImage extends StatelessWidget {
  final String assetPath;
  final double? width;
  final double? height;
  final BoxFit fit;
  
  const AppImage({
    Key? key,
    required this.assetPath,
    this.width,
    this.height,
    this.fit = BoxFit.cover,
  }) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Image.asset(
      assetPath,
      width: width,
      height: height,
      fit: fit,
      errorBuilder: (context, error, stackTrace) {
        return Container(
          width: width,
          height: height,
          color: Colors.grey[300],
          child: Icon(Icons.error),
        );
      },
    );
  }
}
```

------

## ğŸ¨ å­—å‹ç®¡ç†

### 1. å­—å‹ç›®éŒ„çµæ§‹

```
assets/
â”œâ”€â”€ fonts/
â”‚   â”œâ”€â”€ Roboto/               # å­—å‹å®¶æ—ç›®éŒ„
â”‚   â”‚   â”œâ”€â”€ Roboto-Regular.ttf
â”‚   â”‚   â”œâ”€â”€ Roboto-Bold.ttf
â”‚   â”‚   â”œâ”€â”€ Roboto-Italic.ttf
â”‚   â”‚   â””â”€â”€ Roboto-BoldItalic.ttf
â”‚   â”œâ”€â”€ OpenSans/
â”‚   â”‚   â”œâ”€â”€ OpenSans-Regular.ttf
â”‚   â”‚   â”œâ”€â”€ OpenSans-SemiBold.ttf
â”‚   â”‚   â””â”€â”€ OpenSans-Bold.ttf
â”‚   â””â”€â”€ CustomIcons/          # è‡ªè¨‚åœ–ç¤ºå­—å‹
â”‚       â””â”€â”€ CustomIcons.ttf
```

### 2. pubspec.yaml å­—å‹é…ç½®

```yaml
flutter:
  fonts:
    # ä¸»è¦å­—å‹
    - family: Roboto
      fonts:
        - asset: assets/fonts/Roboto/Roboto-Regular.ttf
        - asset: assets/fonts/Roboto/Roboto-Bold.ttf
          weight: 700
        - asset: assets/fonts/Roboto/Roboto-Italic.ttf
          style: italic
        - asset: assets/fonts/Roboto/Roboto-BoldItalic.ttf
          weight: 700
          style: italic
    
    # æ¬¡è¦å­—å‹
    - family: OpenSans
      fonts:
        - asset: assets/fonts/OpenSans/OpenSans-Regular.ttf
        - asset: assets/fonts/OpenSans/OpenSans-SemiBold.ttf
          weight: 600
        - asset: assets/fonts/OpenSans/OpenSans-Bold.ttf
          weight: 700
    
    # è‡ªè¨‚åœ–ç¤ºå­—å‹
    - family: CustomIcons
      fonts:
        - asset: assets/fonts/CustomIcons/CustomIcons.ttf
```

### 3. ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨å­—å‹

```dart
// ç›´æ¥æŒ‡å®šå­—å‹
Text(
  'Hello Flutter',
  style: TextStyle(
    fontFamily: 'Roboto',
    fontSize: 18,
    fontWeight: FontWeight.bold,
  ),
)

// ä½¿ç”¨ä¸»é¡Œçµ±ä¸€ç®¡ç†
class AppTheme {
  static TextTheme textTheme = TextTheme(
    headline1: TextStyle(
      fontFamily: 'Roboto',
      fontSize: 32,
      fontWeight: FontWeight.bold,
    ),
    bodyText1: TextStyle(
      fontFamily: 'OpenSans',
      fontSize: 16,
    ),
  );
}

// æ‡‰ç”¨ä¸»é¡Œ
MaterialApp(
  theme: ThemeData(
    textTheme: AppTheme.textTheme,
    fontFamily: 'Roboto', // é è¨­å­—å‹
  ),
)

// è‡ªè¨‚åœ–ç¤ºå­—å‹
class CustomIcons {
  static const IconData home = IconData(0xe900, fontFamily: 'CustomIcons');
  static const IconData settings = IconData(0xe901, fontFamily: 'CustomIcons');
}

// ä½¿ç”¨è‡ªè¨‚åœ–ç¤º
Icon(CustomIcons.home, size: 24)
```

------

## ğŸ¬ å‹•ç•«è³‡æº

### 1. å‹•ç•«ç›®éŒ„çµæ§‹

```
assets/
â”œâ”€â”€ animations/
â”‚   â”œâ”€â”€ lottie/               # Lottie å‹•ç•«
â”‚   â”‚   â”œâ”€â”€ loading.json
â”‚   â”‚   â”œâ”€â”€ success.json
â”‚   â”‚   â”œâ”€â”€ error.json
â”‚   â”‚   â””â”€â”€ splash.json
â”‚   â”œâ”€â”€ gifs/                 # GIF å‹•ç•«
â”‚   â”‚   â”œâ”€â”€ tutorial_step1.gif
â”‚   â”‚   â”œâ”€â”€ tutorial_step2.gif
â”‚   â”‚   â””â”€â”€ loading_spinner.gif
â”‚   â””â”€â”€ sequences/            # åºåˆ—åœ–ç‰‡å‹•ç•«
â”‚       â”œâ”€â”€ frame_001.png
â”‚       â”œâ”€â”€ frame_002.png
â”‚       â””â”€â”€ frame_003.png
```

### 2. Lottie å‹•ç•«ä½¿ç”¨

```yaml
# pubspec.yaml
dependencies:
  lottie: ^2.0.0

flutter:
  assets:
    - assets/animations/lottie/
import 'package:lottie/lottie.dart';

// åŸºæœ¬ Lottie å‹•ç•«
Lottie.asset(
  'assets/animations/lottie/loading.json',
  width: 200,
  height: 200,
  fit: BoxFit.fill,
)

// å¯æ§åˆ¶çš„ Lottie å‹•ç•«
class AnimatedIcon extends StatefulWidget {
  @override
  _AnimatedIconState createState() => _AnimatedIconState();
}

class _AnimatedIconState extends State<AnimatedIcon>
    with TickerProviderStateMixin {
  late AnimationController _controller;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(vsync: this);
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: () {
        if (_controller.isCompleted) {
          _controller.reset();
        }
        _controller.forward();
      },
      child: Lottie.asset(
        'assets/animations/lottie/heart.json',
        controller: _controller,
        width: 100,
        height: 100,
        onLoaded: (composition) {
          _controller.duration = composition.duration;
        },
      ),
    );
  }
}
```

### 3. GIF å‹•ç•«ä½¿ç”¨

```dart
// åŸºæœ¬ GIF é¡¯ç¤º
Image.asset('assets/animations/gifs/loading_spinner.gif')

// å¯æ§åˆ¶çš„ GIF å‹•ç•«
class GifImage extends StatefulWidget {
  final String gifPath;
  
  GifImage({required this.gifPath});
  
  @override
  _GifImageState createState() => _GifImageState();
}

class _GifImageState extends State<GifImage>
    with TickerProviderStateMixin {
  late AnimationController _controller;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      duration: Duration(seconds: 2),
      vsync: this,
    )..repeat();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _controller,
      builder: (context, child) {
        return Image.asset(widget.gifPath);
      },
    );
  }
}
```

------

## ğŸ”Š éŸ³æ•ˆè³‡æº

### 1. éŸ³æ•ˆç›®éŒ„çµæ§‹

```
assets/
â”œâ”€â”€ audio/
â”‚   â”œâ”€â”€ sounds/               # éŸ³æ•ˆæª”
â”‚   â”‚   â”œâ”€â”€ button_click.mp3
â”‚   â”‚   â”œâ”€â”€ notification.wav
â”‚   â”‚   â”œâ”€â”€ success.ogg
â”‚   â”‚   â””â”€â”€ error.aac
â”‚   â”œâ”€â”€ music/                # èƒŒæ™¯éŸ³æ¨‚
â”‚   â”‚   â”œâ”€â”€ background_1.mp3
â”‚   â”‚   â””â”€â”€ background_2.mp3
â”‚   â””â”€â”€ voice/                # èªéŸ³æª”æ¡ˆ
â”‚       â”œâ”€â”€ welcome_en.mp3
â”‚       â””â”€â”€ welcome_zh.mp3
```

### 2. éŸ³æ•ˆæª”æ¡ˆä½¿ç”¨

```yaml
# pubspec.yaml
dependencies:
  audioplayers: ^1.0.0

flutter:
  assets:
    - assets/audio/
import 'package:audioplayers/audioplayers.dart';

class AudioManager {
  static final AudioPlayer _player = AudioPlayer();
  
  // æ’­æ”¾éŸ³æ•ˆ
  static Future<void> playSound(String soundPath) async {
    await _player.play(AssetSource(soundPath));
  }
  
  // æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚
  static Future<void> playBackgroundMusic(String musicPath) async {
    await _player.play(
      AssetSource(musicPath),
      mode: PlayerMode.mediaPlayer,
    );
    await _player.setReleaseMode(ReleaseMode.loop);
  }
  
  // åœæ­¢æ’­æ”¾
  static Future<void> stop() async {
    await _player.stop();
  }
  
  // è¨­å®šéŸ³é‡
  static Future<void> setVolume(double volume) async {
    await _player.setVolume(volume);
  }
}

// ä½¿ç”¨ç¯„ä¾‹
class SoundButton extends StatelessWidget {
  final VoidCallback? onPressed;
  final Widget child;
  
  const SoundButton({
    Key? key,
    this.onPressed,
    required this.child,
  }) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: () {
        AudioManager.playSound('audio/sounds/button_click.mp3');
        onPressed?.call();
      },
      child: child,
    );
  }
}
```

------

## ğŸ“‹ è³‡æ–™æª”æ¡ˆç®¡ç†

### 1. è³‡æ–™ç›®éŒ„çµæ§‹

```
assets/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ json/                 # JSON è³‡æ–™
â”‚   â”‚   â”œâ”€â”€ countries.json
â”‚   â”‚   â”œâ”€â”€ cities.json
â”‚   â”‚   â””â”€â”€ app_config.json
â”‚   â”œâ”€â”€ csv/                  # CSV æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ products.csv
â”‚   â”‚   â””â”€â”€ users.csv
â”‚   â”œâ”€â”€ translations/         # å¤šèªè¨€æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”œâ”€â”€ zh_TW.json
â”‚   â”‚   â””â”€â”€ ja.json
â”‚   â””â”€â”€ mock/                 # æ¨¡æ“¬è³‡æ–™
â”‚       â”œâ”€â”€ api_responses.json
â”‚       â””â”€â”€ test_data.json
```

### 2. JSON è³‡æ–™è®€å–

```dart
import 'dart:convert';
import 'package:flutter/services.dart';

class DataService {
  // è®€å– JSON æª”æ¡ˆ
  static Future<Map<String, dynamic>> loadJsonData(String path) async {
    final String jsonString = await rootBundle.loadString(path);
    return json.decode(jsonString);
  }
  
  // è®€å–ä¸¦è§£æç‚ºç‰©ä»¶åˆ—è¡¨
  static Future<List<T>> loadDataList<T>(
    String path,
    T Function(Map<String, dynamic>) fromJson,
  ) async {
    final jsonData = await loadJsonData(path);
    final List<dynamic> dataList = jsonData['data'] ?? [];
    return dataList.map((item) => fromJson(item)).toList();
  }
}

// ä½¿ç”¨ç¯„ä¾‹
class Country {
  final String name;
  final String code;
  final String flag;
  
  Country({required this.name, required this.code, required this.flag});
  
  factory Country.fromJson(Map<String, dynamic> json) {
    return Country(
      name: json['name'],
      code: json['code'],
      flag: json['flag'],
    );
  }
}

// è¼‰å…¥åœ‹å®¶è³‡æ–™
Future<List<Country>> loadCountries() async {
  return await DataService.loadDataList<Country>(
    'assets/data/json/countries.json',
    Country.fromJson,
  );
}
```

### 3. å¤šèªè¨€æª”æ¡ˆ

```json
// assets/data/translations/en.json
{
  "app": {
    "title": "My Flutter App",
    "welcome": "Welcome"
  },
  "buttons": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete"
  },
  "messages": {
    "success": "Operation successful",
    "error": "An error occurred"
  }
}

// assets/data/translations/zh_TW.json
{
  "app": {
    "title": "æˆ‘çš„ Flutter æ‡‰ç”¨ç¨‹å¼",
    "welcome": "æ­¡è¿"
  },
  "buttons": {
    "save": "å„²å­˜",
    "cancel": "å–æ¶ˆ",
    "delete": "åˆªé™¤"
  },
  "messages": {
    "success": "æ“ä½œæˆåŠŸ",
    "error": "ç™¼ç”ŸéŒ¯èª¤"
  }
}
```

------

## âš™ï¸ å¹³å°ç‰¹å®šé…ç½®

### 1. Android é…ç½®

#### AndroidManifest.xml æ¬Šé™è¨­å®š

```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapp">
    
    <!-- ç¶²è·¯æ¬Šé™ -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    
    <!-- å„²å­˜æ¬Šé™ -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    
    <!-- ç›¸æ©Ÿæ¬Šé™ -->
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" android:required="false" />
    
    <!-- å®šä½æ¬Šé™ -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    
    <!-- éº¥å…‹é¢¨æ¬Šé™ -->
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    
    <!-- é€šçŸ¥æ¬Šé™ -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.VIBRATE" />
    
    <!-- è—ç‰™æ¬Šé™ -->
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    
    <!-- è¯çµ¡äººæ¬Šé™ -->
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />

    <application
        android:label="My Flutter App"
        android:icon="@mipmap/ic_launcher"
        android:requestLegacyExternalStorage="true"
        android:usesCleartextTraffic="true">
        
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:launchMode="singleTop"
            android:theme="@style/LaunchTheme"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
            android:hardwareAccelerated="true"
            android:windowSoftInputMode="adjustResize">
            
            <!-- å•Ÿå‹• Intent -->
            <intent-filter android:autoVerify="true">
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
            
            <!-- æ·±åº¦é€£çµ -->
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="myapp" />
            </intent-filter>
        </activity>
        
        <!-- Firebase æ¨é€é€šçŸ¥æœå‹™ -->
        <service
            android:name=".MyFirebaseMessagingService"
            android:exported="false">
            <intent-filter>
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>
    </application>
</manifest>
```

#### build.gradle é…ç½®

```gradle
// android/app/build.gradle
android {
    compileSdkVersion 33
    ndkVersion flutter.ndkVersion

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        applicationId "com.example.myapp"
        minSdkVersion 21
        targetSdkVersion 33
        versionCode flutterVersionCode.toInteger()
        versionName flutterVersionName
        multiDexEnabled true
    }

    signingConfigs {
        release {
            keyAlias keystoreProperties['keyAlias']
            keyPassword keystoreProperties['keyPassword']
            storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null
            storePassword keystoreProperties['storePassword']
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            shrinkResources true
        }
    }
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
    implementation 'androidx.multidex:multidex:2.0.1'
}
```

### 2. iOS é…ç½®

#### Info.plist æ¬Šé™è¨­å®š

```xml
<!-- ios/Runner/Info.plist -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <!-- æ‡‰ç”¨ç¨‹å¼åŸºæœ¬è³‡è¨Š -->
    <key>CFBundleName</key>
    <string>My Flutter App</string>
    <key>CFBundleDisplayName</key>
    <string>My Flutter App</string>
    <key>CFBundleIdentifier</key>
    <string>com.example.myapp</string>
    <key>CFBundleVersion</key>
    <string>1.0.0</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0.0</string>
    
    <!-- æ¬Šé™èªªæ˜ -->
    <key>NSCameraUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦ç›¸æ©Ÿæ¬Šé™ä¾†æ‹æ”ç…§ç‰‡</string>
    
    <key>NSPhotoLibraryUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦å­˜å–ç…§ç‰‡åº«ä¾†é¸æ“‡åœ–ç‰‡</string>
    
    <key>NSMicrophoneUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦éº¥å…‹é¢¨æ¬Šé™ä¾†éŒ„è£½éŸ³é »</string>
    
    <key>NSLocationWhenInUseUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦å®šä½æ¬Šé™ä¾†æä¾›ä½ç½®æœå‹™</string>
    
    <key>NSLocationAlwaysAndWhenInUseUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦å®šä½æ¬Šé™ä¾†æä¾›èƒŒæ™¯ä½ç½®æœå‹™</string>
    
    <key>NSContactsUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦è¯çµ¡äººæ¬Šé™ä¾†åŒæ­¥è¯çµ¡äºº</string>
    
    <key>NSCalendarsUsageDescription</key>
    <string>æ­¤æ‡‰ç”¨ç¨‹å¼éœ€è¦è¡Œäº‹æ›†æ¬Šé™ä¾†ç®¡ç†äº‹ä»¶</string>
    
    <!-- ç¶²è·¯å®‰å…¨è¨­å®š -->
    <key>NSAppTransportSecurity</key>
    <dict>
        <key>NSAllowsArbitraryLoads</key>
        <true/>
    </dict>
    
    <!-- URL Scheme -->
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>myapp.deeplink</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>myapp</string>
            </array>
        </dict>
    </array>
    
    <!-- æ”¯æ´çš„ä»‹é¢æ–¹å‘ -->
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
</dict>
</plist>
```

------

## ğŸ¯ æ‡‰ç”¨ç¨‹å¼åœ–ç¤ºè¨­å®š

### 1. Android åœ–ç¤º

```
android/app/src/main/res/
â”œâ”€â”€ mipmap-mdpi/              # 48x48 px
â”‚   â””â”€â”€ ic_launcher.png
â”œâ”€â”€ mipmap-hdpi/              # 72x72 px
â”‚   â””â”€â”€ ic_launcher.png
â”œâ”€â”€ mipmap-xhdpi/             # 96x96 px
â”‚   â””â”€â”€ ic_launcher.png
â”œâ”€â”€ mipmap-xxhdpi/            # 144x144 px
â”‚   â””â”€â”€ ic_launcher.png
â”œâ”€â”€ mipmap-xxxhdpi/           # 192x192 px
â”‚   â””â”€â”€ ic_launcher.png
â””â”€â”€ mipmap-anydpi-v26/        # è‡ªé©æ‡‰åœ–ç¤º (Android 8.0+)
    â”œâ”€â”€ ic_launcher.xml
    â””â”€â”€ ic_launcher_background.xml
```

### 2. iOS åœ–ç¤º

```
ios/Runner/Assets.xcassets/AppIcon.appiconset/
â”œâ”€â”€ Icon-App-20x20@1x.png     # 20x20 px
â”œâ”€â”€ Icon-App-20x20@2x.png     # 40x40 px
â”œâ”€â”€ Icon-App-20x20@3x.png     # 60x60 px
â”œâ”€â”€ Icon-App-29x29@1x.png     # 29x29 px
â”œâ”€â”€ Icon-App-29x29@2x.png     # 58x58 px
â”œâ”€â”€ Icon-App-29x29@3x.png     # 87x87 px
â”œâ”€â”€ Icon-App-40x40@1x.png     # 40x40 px
â”œâ”€â”€ Icon-App-40x40@2x.png     # 80x80 px
â”œâ”€â”€ Icon-App-40x40@3x.png     # 120x120 px
â”œâ”€â”€ Icon-App-60x60@2x.png     # 120x120 px
â”œâ”€â”€ Icon-App-60x60@3x.png     # 180x180 px
â”œâ”€â”€ Icon-App-76x76@1x.png     # 76x76 px
â”œâ”€â”€ Icon-App-76x76@2x.png     # 152x152 px
â”œâ”€â”€ Icon-App-83.5x83.5@2x.png # 167x167 px
â””â”€â”€ Icon-App-1024x1024@1x.png # 1024x1024 px
```

### 3. è‡ªå‹•ç”Ÿæˆåœ–ç¤ºå·¥å…·

```yaml
# pubspec.yaml
dev_dependencies:
  flutter_launcher_icons: ^0.11.0

flutter_icons:
  android: "launcher_icon"
  ios: true
  image_path: "assets/icon/app_icon.png"
  min_sdk_android: 21
  web:
    generate: true
    image_path: "assets/icon/app_icon.png"
  windows:
    generate: true
    image_path: "assets/icon/app_icon.png"
    icon_size: 48
  macos:
    generate: true
    image_path: "assets/icon/app_icon.png"
# åŸ·è¡Œåœ–ç¤ºç”Ÿæˆ
flutter pub get
flutter pub run flutter_launcher_icons:main
```

------

## ğŸš€ å•Ÿå‹•ç•«é¢è¨­å®š

### 1. flutter_native_splash å¥—ä»¶

```yaml
# pubspec.yaml
dev_dependencies:
  flutter_native_splash: ^2.3.0

flutter_native_splash:
  # èƒŒæ™¯é¡è‰²
  color: "#42a5f5"
  color_dark: "#042a49"
  
  # å•Ÿå‹•åœ–ç‰‡
  image: assets/images/splash_logo.png
  image_dark: assets/images/splash_logo_dark.png
  
  # åœ–ç‰‡è¨­å®š
  fill: true
  
  # Android ç‰¹å®šè¨­å®š
  android_gravity: center
  android_12:
    image: assets/images/splash_logo_android12.png
    color: "#42a5f5"
    
  # iOS ç‰¹å®šè¨­å®š
  ios_content_mode: center
  
  # Web è¨­å®š
  web: true
  web_image_mode: center
# ç”Ÿæˆå•Ÿå‹•ç•«é¢
flutter pub get
flutter pub run flutter_native_splash:create

# ç§»é™¤å•Ÿå‹•ç•«é¢
flutter pub run flutter_native_splash:remove
```

### 2. è‡ªè¨‚å•Ÿå‹•ç•«é¢ (Android)

```xml
<!-- android/app/src/main/res/drawable/launch_background.xml -->
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- èƒŒæ™¯é¡è‰² -->
    <item android:drawable="@android:color/white" />
    
    <!-- å•Ÿå‹•åœ–ç¤º -->
    <item>
        <bitmap
            android:gravity="center"
            android:src="@drawable/splash_logo" />
    </item>
</layer-list>
<!-- android/app/src/main/res/values/styles.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="LaunchTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:windowBackground">@drawable/launch_background</item>
    </style>
    
    <style name="NormalTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:windowBackground">?android:colorBackground</item>
    </style>
</resources>
```

------

## ğŸŒ Web å¹³å°é…ç½®

### 1. Web ç›®éŒ„çµæ§‹

```
web/
â”œâ”€â”€ index.html                # ä¸»é é¢
â”œâ”€â”€ manifest.json            # PWA è¨­å®šæª”
â”œâ”€â”€ favicon.png              # ç¶²ç«™åœ–ç¤º
â”œâ”€â”€ icons/                   # PWA åœ–ç¤º
â”‚   â”œâ”€â”€ Icon-192.png         # 192x192 px
â”‚   â”œâ”€â”€ Icon-512.png         # 512x512 px
â”‚   â””â”€â”€ Icon-maskable-192.png
â”œâ”€â”€ splash/                  # å•Ÿå‹•ç•«é¢åœ–ç‰‡
â”‚   â”œâ”€â”€ img/
â”‚   â”‚   â”œâ”€â”€ light-1x.png
â”‚   â”‚   â”œâ”€â”€ light-2x.png
â”‚   â”‚   â”œâ”€â”€ dark-1x.png
â”‚   â”‚   â””â”€â”€ dark-2x.png
â”‚   â””â”€â”€ splash.js
â””â”€â”€ sw.js                    # Service Worker
```

### 2. index.html é…ç½®

```html
<!DOCTYPE html>
<html>
<head>
  <base href="$FLUTTER_BASE_HREF">
  
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="æˆ‘çš„ Flutter Web æ‡‰ç”¨ç¨‹å¼">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Apple meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="My Flutter App">
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  <link rel="icon" type="image/png" href="favicon.png"/>
  
  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  
  <title>My Flutter App</title>
  
  <!-- è‡ªè¨‚ CSS -->
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(45deg, #1e3c72, #2a5298);
      color: white;
      font-family: 'Roboto', sans-serif;
      overflow: hidden;
    }
    
    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    
    .loading-logo {
      width: 150px;
      height: 150px;
      margin-bottom: 30px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .loading-text {
      font-size: 18px;
      margin-bottom: 20px;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading" class="loading">
    <img src="icons/Icon-192.png" alt="App Logo" class="loading-logo">
    <div class="loading-text">æ­£åœ¨è¼‰å…¥æ‡‰ç”¨ç¨‹å¼...</div>
    <div class="loading-spinner"></div>
  </div>
  
  <!-- Flutter App Container -->
  <div id="app"></div>
  
  <script>
    window.addEventListener('load', function(ev) {
      // éš±è—è¼‰å…¥ç•«é¢
      var loading = document.querySelector('#loading');
      loading.style.display = 'none';
      
      // Download main.dart.js
      _flutter.loader.loadEntrypoint({
        serviceWorker: {
          serviceWorkerVersion: serviceWorkerVersion,
        },
        onEntrypointLoaded: function(engineInitializer) {
          engineInitializer.initializeEngine().then(function(appRunner) {
            appRunner.runApp();
          });
        }
      });
    });
  </script>
</body>
</html>
```

### 3. manifest.json PWA é…ç½®

```json
{
  "name": "My Flutter App",
  "short_name": "Flutter App",
  "start_url": ".",
  "display": "standalone",
  "background_color": "#1e3c72",
  "theme_color": "#2a5298",
  "description": "æˆ‘çš„ Flutter Web æ‡‰ç”¨ç¨‹å¼",
  "orientation": "portrait-primary",
  "prefer_related_applications": false,
  "icons": [
    {
      "src": "icons/Icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "icons/Icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    },
    {
      "src": "icons/Icon-maskable-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable"
    }
  ],
  "shortcuts": [
    {
      "name": "é¦–é ",
      "short_name": "Home",
      "url": "/",
      "icons": [
        {
          "src": "icons/Icon-192.png",
          "sizes": "192x192"
        }
      ]
    }
  ]
}
```

------

## ğŸ”§ ç’°å¢ƒè®Šæ•¸èˆ‡é…ç½®ç®¡ç†

### 1. ç’°å¢ƒé…ç½®æª”æ¡ˆ

```
config/
â”œâ”€â”€ dev.json                 # é–‹ç™¼ç’°å¢ƒ
â”œâ”€â”€ staging.json             # æ¸¬è©¦ç’°å¢ƒ
â”œâ”€â”€ prod.json               # ç”Ÿç”¢ç’°å¢ƒ
â””â”€â”€ local.json              # æœ¬åœ°ç’°å¢ƒ
// config/dev.json
{
  "apiBaseUrl": "https://dev-api.example.com",
  "enableLogging": true,
  "enableAnalytics": false,
  "features": {
    "newFeature": true,
    "betaFeature": false
  },
  "keys": {
    "googleMaps": "dev_google_maps_key",
    "firebase": {
      "appId": "dev_firebase_app_id",
      "apiKey": "dev_firebase_api_key"
    }
  }
}

// config/prod.json
{
  "apiBaseUrl": "https://api.example.com",
  "enableLogging": false,
  "enableAnalytics": true,
  "features": {
    "newFeature": true,
    "betaFeature": false
  },
  "keys": {
    "googleMaps": "prod_google_maps_key",
    "firebase": {
      "appId": "prod_firebase_app_id",
      "apiKey": "prod_firebase_api_key"
    }
  }
}
```

### 2. é…ç½®ç®¡ç†é¡åˆ¥

```dart
import 'dart:convert';
import 'package:flutter/services.dart';

class AppConfig {
  static AppConfig? _instance;
  static AppConfig get instance => _instance!;
  
  late String apiBaseUrl;
  late bool enableLogging;
  late bool enableAnalytics;
  late Map<String, dynamic> features;
  late Map<String, dynamic> keys;
  
  AppConfig._();
  
  static Future<void> initialize({String environment = 'prod'}) async {
    _instance = AppConfig._();
    await _instance!._loadConfig(environment);
  }
  
  Future<void> _loadConfig(String environment) async {
    try {
      final configPath = 'assets/config/$environment.json';
      final configString = await rootBundle.loadString(configPath);
      final config = json.decode(configString);
      
      apiBaseUrl = config['apiBaseUrl'];
      enableLogging = config['enableLogging'];
      enableAnalytics = config['enableAnalytics'];
      features = config['features'];
      keys = config['keys'];
    } catch (e) {
      throw Exception('Failed to load config for environment: $environment');
    }
  }
  
  // åŠŸèƒ½é–‹é—œ
  bool isFeatureEnabled(String featureName) {
    return features[featureName] ?? false;
  }
  
  // å–å¾— API é‡‘é‘°
  String getApiKey(String keyName) {
    return keys[keyName] ?? '';
  }
  
  // å–å¾—åµŒå¥—é‡‘é‘°
  String getNestedKey(String parent, String child) {
    final parentKeys = keys[parent] as Map<String, dynamic>?;
    return parentKeys?[child] ?? '';
  }
}

// main.dart ä¸­åˆå§‹åŒ–
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // æ ¹æ“šå»ºç½®æ¨¡å¼è¼‰å…¥ä¸åŒé…ç½®
  const environment = String.fromEnvironment('ENV', defaultValue: 'prod');
  await AppConfig.initialize(environment: environment);
  
  runApp(MyApp());
}

// ä½¿ç”¨ç¯„ä¾‹
class ApiService {
  static String get baseUrl => AppConfig.instance.apiBaseUrl;
  
  static Future<void> logEvent(String event) async {
    if (AppConfig.instance.enableAnalytics) {
      // å‚³é€åˆ†æäº‹ä»¶
    }
  }
}
```

### 3. å»ºç½®æŒ‡ä»¤

```bash
# é–‹ç™¼ç’°å¢ƒ
flutter run --dart-define=ENV=dev

# æ¸¬è©¦ç’°å¢ƒ
flutter run --dart-define=ENV=staging

# ç”Ÿç”¢ç’°å¢ƒ
flutter build apk --dart-define=ENV=prod
flutter build ios --dart-define=ENV=prod
```

------

## ğŸ” å®‰å…¨æ€§é…ç½®

### 1. API é‡‘é‘°ä¿è­·

```dart
// lib/config/secrets.dart (ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶)
class Secrets {
  static const String googleMapsApiKey = String.fromEnvironment(
    'GOOGLE_MAPS_API_KEY',
    defaultValue: '',
  );
  
  static const String firebaseApiKey = String.fromEnvironment(
    'FIREBASE_API_KEY',
    defaultValue: '',
  );
}

// ä½¿ç”¨æ–¹å¼
GoogleMap(
  onMapCreated: _onMapCreated,
  initialCameraPosition: CameraPosition(
    target: LatLng(37.42796133580664, -122.085749655962),
    zoom: 14.4746,
  ),
  apiKey: Secrets.googleMapsApiKey,
)
```

### 2. ç¶²è·¯å®‰å…¨é…ç½®

```xml
<!-- android/app/src/main/res/xml/network_security_config.xml -->
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
    <domain-config cleartextTrafficPermitted="false">
        <domain includeSubdomains="true">api.example.com</domain>
        <trust-anchors>
            <certificates src="system"/>
            <certificates src="user"/>
        </trust-anchors>
    </domain-config>
    
    <!-- åƒ…é–‹ç™¼ç’°å¢ƒå…è¨± HTTP -->
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">localhost</domain>
        <domain includeSubdomains="true">10.0.2.2</domain>
    </domain-config>
</network-security-config>
<!-- åœ¨ AndroidManifest.xml ä¸­å¼•ç”¨ -->
<application
    android:networkSecurityConfig="@xml/network_security_config">
</application>
```

### 3. ç¨‹å¼ç¢¼æ··æ·†è¨­å®š

```gradle
// android/app/build.gradle
android {
    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}
# android/app/proguard-rules.pro
-keep class io.flutter.app.** { *; }
-keep class io.flutter.plugin.**  { *; }
-keep class io.flutter.util.**  { *; }
-keep class io.flutter.view.**  { *; }
-keep class io.flutter.**  { *; }
-keep class io.flutter.plugins.**  { *; }
-dontwarn io.flutter.embedding.**
```

------

## ğŸ“Š è³‡æºå„ªåŒ–ç­–ç•¥

### 1. åœ–ç‰‡å„ªåŒ–

```yaml
# pubspec.yaml - å£“ç¸®è¨­å®š
flutter:
  assets:
    - assets/images/
  
  # é‡å°ä¸åŒå¹³å°å„ªåŒ–
  generate: true
// åœ–ç‰‡å¿«å–ç­–ç•¥
class OptimizedImage extends StatelessWidget {
  final String imagePath;
  final double? width;
  final double? height;
  
  const OptimizedImage({
    Key? key,
    required this.imagePath,
    this.width,
    this.height,
  }) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Image.asset(
      imagePath,
      width: width,
      height: height,
      // è¨˜æ†¶é«”å¿«å–è¨­å®š
      cacheWidth: width?.toInt(),
      cacheHeight: height?.toInt(),
      // åœ–ç‰‡å“è³ªè¨­å®š
      filterQuality: FilterQuality.medium,
      // éŒ¯èª¤è™•ç†
      errorBuilder: (context, error, stackTrace) {
        return Container(
          width: width,
          height: height,
          color: Colors.grey[300],
          child: Icon(Icons.error),
        );
      },
    );
  }
}
```

### 2. å­—å‹å­é›†åŒ–

```yaml
# pubspec.yaml
flutter:
  fonts:
    - family: CustomFont
      fonts:
        - asset: assets/fonts/CustomFont.ttf
          # åªåŒ…å«éœ€è¦çš„å­—ç¬¦
          unicode-range: U+0000-00FF, U+0131, U+0152-0153
```

### 3. è³‡æºå£“ç¸®è…³æœ¬

```bash
#!/bin/bash
# scripts/optimize_assets.sh

echo "é–‹å§‹å„ªåŒ–è³‡æº..."

# å£“ç¸® PNG åœ–ç‰‡
find assets/images -name "*.png" -exec pngcrush -rem allb -reduce {} {}.tmp \; -exec mv {}.tmp {} \;

# å£“ç¸® JPG åœ–ç‰‡
find assets/images -name "*.jpg" -exec jpegoptim --strip-all --max=85 {} \;

# å£“ç¸® JSON æª”æ¡ˆ
find assets/data -name "*.json" -exec jq -c . {} \; > {}.tmp && mv {}.tmp {}

echo "è³‡æºå„ªåŒ–å®Œæˆï¼"
```

------

## ğŸ¨ è¨­è¨ˆç³»çµ±è³‡æº

### 1. è¨­è¨ˆä»£å¹£ (Design Tokens)

```json
// assets/design/tokens.json
{
  "colors": {
    "primary": {
      "50": "#e3f2fd",
      "100": "#bbdefb",
      "500": "#2196f3",
      "900": "#0d47a1"
    },
    "neutral": {
      "50": "#fafafa",
      "100": "#f5f5f5",
      "500": "#9e9e9e",
      "900": "#212121"
    }
  },
  "spacing": {
    "xs": 4,
    "sm": 8,
    "md": 16,
    "lg": 24,
    "xl": 32
  },
  "typography": {
    "heading1": {
      "fontSize": 32,
      "fontWeight": "700",
      "lineHeight": 1.2
    },
    "body": {
      "fontSize": 16,
      "fontWeight": "400",
      "lineHeight": 1.5
    }
  },
  "borderRadius": {
    "sm": 4,
    "md": 8,
    "lg": 16,
    "full": 9999
  }
}
// lib/design/design_tokens.dart
import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

class DesignTokens {
  static late Map<String, dynamic> _tokens;
  
  static Future<void> initialize() async {
    final tokenString = await rootBundle.loadString('assets/design/tokens.json');
    _tokens = json.decode(tokenString);
  }
  
  // é¡è‰²
  static Color getColor(String path) {
    final colorHex = _getNestedValue(path) as String;
    return Color(int.parse(colorHex.substring(1), radix: 16) + 0xFF000000);
  }
  
  // é–“è·
  static double getSpacing(String size) {
    return (_tokens['spacing'][size] as num).toDouble();
  }
  
  // å­—é«”å¤§å°
  static double getFontSize(String style) {
    return (_tokens['typography'][style]['fontSize'] as num).toDouble();
  }
  
  // åœ“è§’
  static double getBorderRadius(String size) {
    return (_tokens['borderRadius'][size] as num).toDouble();
  }
  
  static dynamic _getNestedValue(String path) {
    final keys = path.split('.');
    dynamic value = _tokens;
    for (final key in keys) {
      value = value[key];
    }
    return value;
  }
}

// ä½¿ç”¨ç¯„ä¾‹
Container(
  padding: EdgeInsets.all(DesignTokens.getSpacing('md')),
  decoration: BoxDecoration(
    color: DesignTokens.getColor('colors.primary.500'),
    borderRadius: BorderRadius.circular(DesignTokens.getBorderRadius('md')),
  ),
  child: Text(
    'Design System',
    style: TextStyle(
      fontSize: DesignTokens.getFontSize('heading1'),
      color: Colors.white,
    ),
  ),
)
```

------

## ğŸ§ª æ¸¬è©¦è³‡æº

### 1. æ¸¬è©¦è³‡æ–™ç›®éŒ„

```
test/
â”œâ”€â”€ fixtures/                # æ¸¬è©¦ç”¨å›ºå®šè³‡æ–™
â”‚   â”œâ”€â”€ json/
â”‚   â”‚   â”œâ”€â”€ user_valid.json
â”‚   â”‚   â”œâ”€â”€ user_invalid.json
â”‚   â”‚   â””â”€â”€ api_responses.json
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ test_image.png
â”‚   â”‚   â””â”€â”€ test_avatar.jpg
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ test_database.db
â”‚       â””â”€â”€ test_config.json
â”œâ”€â”€ mocks/                   # Mock æª”æ¡ˆ
â”‚   â”œâ”€â”€ mock_api_service.dart
â”‚   â””â”€â”€ mock_data_service.dart
â””â”€â”€ helpers/                 # æ¸¬è©¦è¼”åŠ©å·¥å…·
    â”œâ”€â”€ test_helpers.dart
    â””â”€â”€ widget_test_helpers.dart
```

### 2. æ¸¬è©¦è¼”åŠ©å·¥å…·

```dart
// test/helpers/test_helpers.dart
import 'dart:convert';
import 'dart:io';
import 'package:flutter/services.dart';
import 'package:flutter_test/flutter_test.dart';

class TestHelpers {
  // è¼‰å…¥æ¸¬è©¦ç”¨ JSON è³‡æ–™
  static Future<Map<String, dynamic>> loadJsonFixture(String path) async {
    final file = File('test/fixtures/json/$path');
    final jsonString = await file.readAsString();
    return json.decode(jsonString);
  }
  
  // è¼‰å…¥æ¸¬è©¦ç”¨åœ–ç‰‡
  static Future<Uint8List> loadImageFixture(String path) async {
    final file = File('test/fixtures/images/$path');
    return await file.readAsBytes();
  }
  
  // æ¨¡æ“¬ AssetBundle
  static void mockAssetBundle() {
    TestDefaultBinaryMessengerBinding.instance.defaultBinaryMessenger
        .setMockMethodCallHandler(
      const MethodChannel('flutter/assets'),
      (MethodCall methodCall) async {
        if (methodCall.method == 'load') {
          final String asset = methodCall.arguments;
          if (asset.startsWith('test/fixtures/')) {
            final file = File(asset);
            return file.readAsBytes();
          }
        }
        return null;
      },
    );
  }
}

// test/helpers/widget_test_helpers.dart
import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';

class WidgetTestHelpers {
  // å»ºç«‹æ¸¬è©¦ç”¨çš„ MaterialApp wrapper
  static Widget wrapWithMaterialApp(Widget widget) {
    return MaterialApp(
      home: Scaffold(body: widget),
    );
  }
  
  // å»ºç«‹æ¸¬è©¦ç”¨çš„ä¸»é¡Œ wrapper
  static Widget wrapWithTheme(Widget widget, {ThemeData? theme}) {
    return MaterialApp(
      theme: theme ?? ThemeData(),
      home: Scaffold(body: widget),
    );
  }
  
  // ç­‰å¾…å‹•ç•«å®Œæˆ
  static Future<void> waitForAnimation(WidgetTester tester) async {
    await tester.pumpAndSettle(const Duration(seconds: 1));
  }
  
  // å°‹æ‰¾å¸¶æœ‰ç‰¹å®šæ–‡å­—çš„ Widget
  static Finder findTextContaining(String text) {
    return find.byWidgetPredicate(
      (widget) => widget is Text && widget.data != null && widget.data!.contains(text),
    );
  }
}
```

------

## ğŸ“‹ æœ€ä½³å¯¦è¸æª¢æŸ¥æ¸…å–®

### âœ… è³‡æºç®¡ç†

- [ ] è³‡æºæª”æ¡ˆä½¿ç”¨æœ‰æ„ç¾©çš„å‘½å
- [ ] åœ–ç‰‡æä¾›å¤šç¨®è§£æåº¦ç‰ˆæœ¬
- [ ] å¤§å‹è³‡æºæª”æ¡ˆç¶“éå£“ç¸®å„ªåŒ–
- [ ] pubspec.yaml ä¸­æ­£ç¢ºé…ç½®æ‰€æœ‰è³‡æº
- [ ] åˆªé™¤æœªä½¿ç”¨çš„è³‡æºæª”æ¡ˆ

### âœ… å®‰å…¨æ€§

- [ ] æ•æ„Ÿè³‡è¨Šä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†
- [ ] API é‡‘é‘°ä¸ç¡¬ç·¨ç¢¼åœ¨ç¨‹å¼ç¢¼ä¸­
- [ ] ç¶²è·¯é€šè¨Šä½¿ç”¨ HTTPS
- [ ] è¨­å®šé©ç•¶çš„ç¶²è·¯å®‰å…¨ç­–ç•¥
- [ ] ç”Ÿç”¢ç’°å¢ƒå•Ÿç”¨ç¨‹å¼ç¢¼æ··æ·†

### âœ… æ•ˆèƒ½å„ªåŒ–

- [ ] åœ–ç‰‡ä½¿ç”¨é©ç•¶çš„è§£æåº¦å’Œæ ¼å¼
- [ ] å¯¦ä½œåœ–ç‰‡å»¶é²è¼‰å…¥å’Œå¿«å–
- [ ] å­—å‹æª”æ¡ˆé€²è¡Œå­é›†åŒ–
- [ ] ç§»é™¤æœªä½¿ç”¨çš„ç¨‹å¼ç¢¼å’Œè³‡æº
- [ ] è¨­å®šé©ç•¶çš„å»ºç½®å„ªåŒ–é¸é …

### âœ… å¹³å°é…ç½®

- [ ] Android æ¬Šé™è¨­å®šæ­£ç¢ºä¸”æœ€å°åŒ–
- [ ] iOS Info.plist åŒ…å«å¿…è¦çš„æ¬Šé™èªªæ˜
- [ ] æ‡‰ç”¨ç¨‹å¼åœ–ç¤ºè¦†è“‹æ‰€æœ‰å¿…è¦å°ºå¯¸
- [ ] å•Ÿå‹•ç•«é¢åœ¨å„å¹³å°æ­£å¸¸é¡¯ç¤º
- [ ] Deep Link å’Œ URL Scheme è¨­å®šæ­£ç¢º

### âœ… é–‹ç™¼é«”é©—

- [ ] ç’°å¢ƒé…ç½®ç®¡ç†å®Œå–„
- [ ] æ¸¬è©¦è³‡æ–™çµ„ç¹”è‰¯å¥½
- [ ] å»ºç½®è…³æœ¬è‡ªå‹•åŒ–ç¨‹åº¦é«˜
- [ ] æ–‡æª”å®Œæ•´ä¸”ä¿æŒæ›´æ–°
- [ ] ç‰ˆæœ¬æ§åˆ¶å¿½ç•¥æ•æ„Ÿæª”æ¡ˆ

------

## ğŸ¯ å¸¸è¦‹å•é¡Œè§£æ±º

### 1. è³‡æºè¼‰å…¥å¤±æ•—

```dart
// å•é¡Œï¼šImage.asset() ç„¡æ³•è¼‰å…¥åœ–ç‰‡
// è§£æ±ºæ–¹æ¡ˆï¼šæª¢æŸ¥ pubspec.yaml é…ç½®å’Œæª”æ¡ˆè·¯å¾‘

// âŒ éŒ¯èª¤çš„é…ç½®
flutter:
  assets:
    - assets/image/  # è·¯å¾‘éŒ¯èª¤

// âœ… æ­£ç¢ºçš„é…ç½®
flutter:
  assets:
    - assets/images/  # æ­£ç¢ºè·¯å¾‘

// ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨éŒ¯èª¤è™•ç†
Image.asset(
  'assets/images/logo.png',
  errorBuilder: (context, error, stackTrace) {
    print('Failed to load image: $error');
    return Icon(Icons.error);
  },
)
```

### 2. å­—å‹æœªç”Ÿæ•ˆ

```dart
// å•é¡Œï¼šè‡ªè¨‚å­—å‹æœªé¡¯ç¤º
// è§£æ±ºæ–¹æ¡ˆï¼š

// 1. æª¢æŸ¥ pubspec.yaml å­—å‹é…ç½®
flutter:
  fonts:
    - family: CustomFont  # ç¢ºä¿ family åç¨±æ­£ç¢º
      fonts:
        - asset: assets/fonts/CustomFont.ttf

// 2. é‡æ–°åŸ·è¡Œ flutter clean å’Œ flutter pub get
// 3. é‡å•Ÿæ‡‰ç”¨ç¨‹å¼

// 4. åœ¨ç¨‹å¼ç¢¼ä¸­æ­£ç¢ºä½¿ç”¨
Text(
  'Custom Font Text',
  style: TextStyle(
    fontFamily: 'CustomFont',  # åç¨±å¿…é ˆèˆ‡ pubspec.yaml ä¸€è‡´
  ),
)
```

### 3. æ¬Šé™è¢«æ‹’çµ•

```dart
// å•é¡Œï¼šåŸ·è¡Œæ™‚æ¬Šé™è¢«æ‹’çµ•
// è§£æ±ºæ–¹æ¡ˆï¼š

// 1. æª¢æŸ¥ AndroidManifest.xml æ¬Šé™å®£å‘Š
// 2. æª¢æŸ¥ iOS Info.plist æ¬Šé™èªªæ˜
// 3. ä½¿ç”¨æ¬Šé™è«‹æ±‚å¥—ä»¶

dependencies:
  permission_handler: ^10.0.0

// ç¨‹å¼ç¢¼ä¸­è«‹æ±‚æ¬Šé™
import 'package:permission_handler/permission_handler.dart';

Future<void> requestCameraPermission() async {
  final status = await Permission.camera.request();
  
  if (status.isGranted) {
    // æ¬Šé™å·²æˆäºˆ
  } else if (status.isDenied) {
    // æ¬Šé™è¢«æ‹’çµ•
  } else if (status.isPermanentlyDenied) {
    // æ¬Šé™è¢«æ°¸ä¹…æ‹’çµ•ï¼Œéœ€è¦å¼•å°ç”¨æˆ¶åˆ°è¨­å®šé é¢
    openAppSettings();
  }
}
```

### 4. å»ºç½®éŒ¯èª¤

```bash
# å•é¡Œï¼šå»ºç½®å¤±æ•—æˆ–è³‡æºæœªåŒ…å«
# è§£æ±ºæ–¹æ¡ˆï¼š

# 1. æ¸…ç†å»ºç½®å¿«å–
flutter clean
flutter pub get

# 2. æª¢æŸ¥è³‡æºè·¯å¾‘
flutter analyze

# 3. é‡æ–°ç”Ÿæˆè³‡æº
flutter packages pub run build_runner build

# 4. æª¢æŸ¥å¹³å°ç‰¹å®šè¨­å®š
# Android: æª¢æŸ¥ build.gradle è¨­å®š
# iOS: æª¢æŸ¥ Info.plist å’Œ Xcode å°ˆæ¡ˆè¨­å®š
```

------

é€™å€‹å®Œæ•´çš„è³‡æºç®¡ç†èˆ‡é…ç½®æŒ‡å—æ¶µè“‹äº† Flutter é–‹ç™¼ä¸­çš„å„ç¨®è³‡æºé¡å‹å’Œé…ç½®æ–¹å¼ã€‚è¨˜ä½ï¼Œè‰¯å¥½çš„è³‡æºç®¡ç†ä¸åƒ…èƒ½æå‡æ‡‰ç”¨ç¨‹å¼æ•ˆèƒ½ï¼Œé‚„èƒ½è®“é–‹ç™¼éç¨‹æ›´åŠ é †æš¢ã€‚å»ºè­°å°‡é€™ä»½æŒ‡å—ä½œç‚ºå°ˆæ¡ˆé–‹ç™¼çš„åƒè€ƒæ‰‹å†Šï¼Œç¢ºä¿æ¯å€‹å°ˆæ¡ˆéƒ½èƒ½éµå¾ªæœ€ä½³å¯¦è¸ï¼