# Flutter 入門指南從零開始

## 🚀 Flutter 簡介

Flutter 是 Google 開發的開源 UI 工具包，讓你可以用單一程式碼庫建構美觀、原生編譯的移動、Web 和桌面應用程式。

### 為什麼選擇 Flutter？

- ⚡ **快速開發**：熱重載功能讓你即時看到程式碼變更
- 🎨 **表現力強的美觀UI**：豐富的 Material Design 和 Cupertino 組件
- 🏃 **原生性能**：編譯為 ARM 和 x64 原生程式碼
- 📱 **跨平台**：一套程式碼支援 iOS、Android、Web、桌面

------

## 🎓 學習路徑建議

### 基礎概念

- [ ] 完成環境設定
- [ ] 理解 Widget 概念
- [ ] 學會基本佈局 (Row, Column, Container)
- [ ] 練習 StatelessWidget 和 StatefulWidget
- [ ] 完成第一個自訂應用程式
- [ ] 在頁面標題找彩蛋

### UI 開發

- [ ] 學習 Material Design Widget
- [ ] 掌握 ListView 和 GridView
- [ ] 理解導航和路由
- [ ] 練習表單輸入和驗證
- [ ] 學習主題和樣式

### 狀態管理

- [ ] 理解 setState 的使用
- [ ] 學習 InheritedWidget
- [ ] 嘗試 Provider 套件
- [ ] 理解狀態管理的最佳實踐

### 進階功能

- [ ] 網路請求和 API 整合
- [ ] 本地資料儲存
- [ ] 圖片處理和快取
- [ ] 動畫基礎

### 實戰專案

- [ ] 規劃一個完整的應用程式
- [ ] 實作核心功能
- [ ] 加入錯誤處理
- [ ] 優化使用者體驗
- [ ] 在背景上

### 部署和優化

- [ ] 學習應用程式打包
- [ ] 效能優化技巧
- [ ] 測試策略
- [ ] 準備發佈到商店

------

## 📚 推薦學習資源

### 官方資源

- [Flutter 官方文檔](https://flutter.dev/docs)
- [Dart 語言導覽](https://dart.dev/guides/language/language-tour)
- [Flutter Widget 目錄](https://flutter.dev/docs/development/ui/widgets)
- [Flutter Cookbook](https://flutter.dev/docs/cookbook)

### 線上課程

- [Flutter 官方 Codelabs](https://flutter.dev/docs/codelabs)
- [Udemy Flutter 課程](https://www.udemy.com/topic/flutter/)
- [YouTube Flutter 頻道](https://www.youtube.com/c/flutterdev)

### 實用工具

- [DartPad](https://dartpad.dev/) - 線上 Dart 編輯器
- [Flutter Widget Livebook](https://flutter-widget.live/) - Widget 即時預覽
- [pub.dev](https://pub.dev/) - Dart 套件庫

### 社群資源

- [Flutter 中文網](https://flutter.cn/)
- [Flutter 台灣社群](https://www.facebook.com/groups/flutter.taiwan/)
- [Stack Overflow Flutter 標籤](https://stackoverflow.com/questions/tagged/flutter)
- [Reddit Flutter 社區](https://www.reddit.com/r/FlutterDev/)

------

## 🏆 專案實戰建議

### 初學者專案

1. **個人名片應用程式** - 練習基本佈局和樣式
2. **BMI 計算器** - 學習輸入處理和計算
3. **待辦事項列表** - 掌握狀態管理
4. **簡單計算機** - 理解事件處理
5. **天氣應用程式** - 學習 API 整合

### 進階專案

1. **記帳應用程式** - 完整的 CRUD 操作
2. **聊天應用程式** - 即時通訊功能
3. **電子商務應用程式** - 複雜的狀態管理
4. **社交媒體應用程式** - 圖片處理和分享
5. **健身追蹤應用程式** - 感測器整合

### 專案開發流程

#### 1. 規劃階段

```
需求分析 → 功能規格 → UI/UX 設計 → 技術架構
```

#### 2. 開發階段

```
專案設定 → 基礎架構 → 功能開發 → 測試 → 優化
```

#### 3. 部署階段

```
打包應用程式 → 商店審核 → 發佈 → 維護更新
```

------

## 🛠️ 開發最佳實踐

### 程式碼組織

```
lib/
├── main.dart           # 應用程式入口
├── models/            # 資料模型
├── screens/           # 畫面頁面
├── widgets/           # 自訂 Widget
├── services/          # 業務邏輯服務
├── utils/             # 工具函數
└── constants/         # 常數定義
```

### 命名規範

```dart
// 類別：PascalCase
class UserProfile extends StatelessWidget {}

// 變數和函數：camelCase
String userName = 'John';
void updateUserInfo() {}

// 常數：SCREAMING_SNAKE_CASE
const String API_BASE_URL = 'https://api.example.com';

// 檔名：snake_case
user_profile_screen.dart
```

### 註釋規範

```dart
/// 使用者個人資料 Widget
/// 
/// 顯示使用者的基本資訊，包括頭像、姓名和聯絡方式
class UserProfile extends StatelessWidget {
  /// 使用者 ID
  final String userId;
  
  /// 是否顯示編輯按鈕
  final bool showEditButton;
  
  const UserProfile({
    Key? key,
    required this.userId,
    this.showEditButton = false,
  }) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    // TODO: 實作使用者資料載入邏輯
    return Container();
  }
}
```

### 錯誤處理

```dart
Future<User> fetchUser(String userId) async {
  try {
    final response = await http.get(Uri.parse('$apiUrl/users/$userId'));
    
    if (response.statusCode == 200) {
      return User.fromJson(json.decode(response.body));
    } else {
      throw HttpException('Failed to load user: ${response.statusCode}');
    }
  } on SocketException {
    throw NetworkException('No internet connection');
  } on HttpException {
    rethrow;
  } catch (e) {
    throw UnknownException('Unknown error occurred: $e');
  }
}
```

------

## 🔍 偵錯技巧

### 1. 使用 Debug Console

```dart
print('Debug message: $variable');
debugPrint('Debug info: ${object.toString()}');
```

### 2. Flutter Inspector

- 檢視 Widget 樹狀結構
- 查看 Widget 屬性
- 測量和對齊工具

### 3. 常用偵錯指令

```bash
# 開啟偵錯模式
flutter run --debug

# 檢視效能
flutter run --profile

# 檢視應用程式大小
flutter build apk --analyze-size

# 檢視相依性
flutter deps
```

### 4. 偵錯 Widget

```dart
class DebugContainer extends StatelessWidget {
  final Widget child;
  
  const DebugContainer({Key? key, required this.child}) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: BoxDecoration(
        border: Border.all(color: Colors.red, width: 2),
      ),
      child: child,
    );
  }
}

// 使用方式
DebugContainer(
  child: YourWidget(),
)
```

------

## 📋 檢查清單

### 開發環境檢查

- [ ] Flutter SDK 已安裝並在 PATH 中
- [ ] `flutter doctor` 無重大問題
- [ ] IDE 已安裝 Flutter 插件
- [ ] 模擬器或實體裝置可正常使用
- [ ] 能成功執行 `flutter create` 和 `flutter run`

### 程式碼品質檢查

- [ ] 程式碼格式化 (`flutter format .`)
- [ ] 靜態分析無警告 (`flutter analyze`)
- [ ] 測試覆蓋率足夠 (`flutter test`)
- [ ] 效能測試通過 (`flutter run --profile`)
- [ ] 記憶體洩漏檢查

### 發佈前檢查

- [ ] 應用程式圖示和名稱正確
- [ ] 版本號碼已更新
- [ ] 權限設定正確
- [ ] 在不同裝置上測試
- [ ] 離線功能測試
- [ ] 網路錯誤處理測試

------

## 🎯 下一步計劃

### 立即行動

1. **完成環境設定** - 確保開發環境正常運作
2. **建立第一個應用程式** - 跟著指南建立個人名片應用程式
3. **學習 Dart 基礎** - 如果還不熟悉 Dart 語言
4. **閱讀官方文檔** - 深入了解 Flutter 核心概念

### 短期目標 (1-2 個月)

1. **掌握基礎 Widget** - 能熟練使用常用 Widget
2. **理解狀態管理** - 知道何時使用 StatefulWidget
3. **完成第一個實用應用程式** - 如待辦事項或計算機
4. **學會偵錯技巧** - 能獨立解決常見問題

### 中期目標 (3-6 個月)

1. **掌握進階概念** - 導航、動畫、網路請求
2. **學習狀態管理方案** - Provider, Riverpod, 或 Bloc
3. **完成複雜專案** - 具有後端整合的完整應用程式
4. **理解效能優化** - 能識別和解決效能問題

### 長期目標 (6 個月以上)

1. **成為 Flutter 專家** - 能指導其他開發者
2. **貢獻開源專案** - 為 Flutter 生態系統做出貢獻
3. **發佈商業應用程式** - 在應用程式商店發佈產品
4. **持續學習新技術** - 跟上 Flutter 發展趨勢

------

## 🌟 激勵話語

> 「每一個專家都曾經是初學者。每一個專業人士都曾經是業餘愛好者。每一個著名的人都曾經是無名小卒。」

### 記住這些重點：

1. **學習是一個過程** - 不要期望立即成為專家
2. **動手實作最重要** - 光看不練是不夠的
3. **犯錯是正常的** - 從錯誤中學習成長
4. **社群很重要** - 積極參與社群討論
5. **持續練習** - 每天寫一點程式碼
6. **保持好奇心** - 不斷探索新功能和最佳實踐

### 開始你的 Flutter 之旅！

現在你已經有了完整的入門指南，是時候開始動手實作了！記住，最好的學習方式就是實際建構應用程式。從簡單的專案開始，逐步挑戰更複雜的功能。

**祝你在 Flutter 開發的道路上一帆風順！** 🚀

------

## 📞 需要協助？

如果在學習過程中遇到問題，可以：

1. **查看官方文檔** - 通常有詳細的解答
2. **搜尋 Stack Overflow** - 很多常見問題已有解答
3. **加入社群討論** - 與其他開發者交流經驗
4. **查看 GitHub Issues** - 可能是已知的 bug
5. **觀看教學影片** - 視覺化學習更容易理解

記住，每個開發者在學習過程中都會遇到挫折，重要的是保持耐心和持續學習的態度。Flutter 社群非常友善和樂於助人，不要害怕提問！

**開始編程，享受創造的樂趣！** ✨📋 環境準備

### 系統需求

**Windows**

- Windows 10 或更新版本 (64-bit)
- 磁碟空間：2.8 GB (不包含 IDE/工具的磁碟空間)

**macOS**

- macOS (64-bit)
- 磁碟空間：2.8 GB (不包含 IDE/工具的磁碟空間)

**Linux**

- Linux (64-bit)
- 磁碟空間：600 MB (不包含 IDE/工具的磁碟空間)

### 必要工具安裝

#### 1. 安裝 Flutter SDK

**方法一：直接下載 (推薦)**

1. 前往 [Flutter 官網](https://flutter.dev/docs/get-started/install)
2. 下載對應作業系統的 Flutter SDK
3. 解壓縮到你想要的位置（例如：`C:\flutter` 或 `~/flutter`）
4. 將 Flutter bin 目錄加入系統 PATH

**Windows 設定 PATH：**

```cmd
# 開啟 PowerShell 或命令提示字元
# 將 Flutter 加入 PATH（替換成你的路徑）
setx PATH "%PATH%;C:\flutter\bin"
```

**macOS/Linux 設定 PATH：**

```bash
# 編輯 ~/.bashrc 或 ~/.zshrc
echo 'export PATH="$PATH:`pwd`/flutter/bin"' >> ~/.bashrc
# 重新載入
source ~/.bashrc
```

**方法二：使用套件管理器**

**macOS (使用 Homebrew):**

```bash
brew install --cask flutter
```

**Windows (使用 Chocolatey):**

```cmd
choco install flutter
```

#### 2. 驗證安裝

```bash
# 檢查 Flutter 版本
flutter --version

# 執行 Flutter doctor 檢查環境
flutter doctor
```

#### 3. 安裝開發工具

**Android Studio (推薦)**

1. 下載並安裝 [Android Studio](https://developer.android.com/studio)
2. 安裝 Flutter 和 Dart 插件：
   - 開啟 Android Studio
   - 前往 **File > Settings > Plugins**
   - 搜尋並安裝 **Flutter** 插件（會自動安裝 Dart）

**Visual Studio Code (輕量選擇)**

1. 下載並安裝 [VS Code](https://code.visualstudio.com/)
2. 安裝擴充套件：
   - **Flutter** (自動包含 Dart)
   - **Dart Code**
   - **Flutter Widget Snippets**

#### 4. 設定開發裝置

**Android 開發設定：**

1. 在 Android Studio 中開啟 **AVD Manager**
2. 建立新的虛擬裝置或連接實體 Android 裝置
3. 啟用開發者選項和 USB 偵錯

**iOS 開發設定 (僅 macOS)：**

1. 安裝 Xcode
2. 開啟 iOS 模擬器或連接實體 iOS 裝置
3. 設定開發者帳號 (用於實體裝置測試)

------

## 🎯 第一個 Flutter 應用程式

### 建立新專案

```bash
# 建立新的 Flutter 專案
flutter create my_first_app

# 進入專案目錄
cd my_first_app

# 執行應用程式
flutter run
```

### 專案結構說明

```
my_first_app/
├── android/          # Android 平台特定檔案
├── ios/              # iOS 平台特定檔案
├── lib/              # Dart 程式碼主目錄
│   └── main.dart     # 應用程式入口點
├── test/             # 測試檔案
├── web/              # Web 平台特定檔案
├── pubspec.yaml      # 專案配置和依賴項
└── README.md
```

### 理解 main.dart

```dart
import 'package:flutter/material.dart';

// 應用程式的入口點
void main() {
  runApp(MyApp());
}

// 主應用程式 Widget
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

// 首頁 Widget
class MyHomePage extends StatefulWidget {
  MyHomePage({Key? key, required this.title}) : super(key: key);
  
  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

// 首頁狀態類別
class _MyHomePageState extends State<MyHomePage> {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
```

------

## 🔧 開發工具使用

### VS Code 快速上手

**常用快捷鍵：**

- `Ctrl/Cmd + Shift + P`：開啟命令面板
- `F5`：啟動偵錯
- `Ctrl/Cmd + S`：儲存並觸發熱重載

**實用擴充套件：**

```json
{
  "recommendations": [
    "dart-code.flutter",
    "dart-code.dart-code",
    "alexisvt.flutter-snippets",
    "hirantha.json-to-dart",
    "robert-brunhage.flutter-riverpod-snippets"
  ]
}
```

### Android Studio 快速上手

**常用功能：**

- **Hot Reload**: `Ctrl/Cmd + \`
- **Hot Restart**: `Ctrl/Cmd + Shift + \`
- **Flutter Inspector**: 檢視 Widget 樹狀結構
- **Flutter Outline**: 檢視程式碼結構

------

## 📱 建構你的第一個自訂應用程式

讓我們建立一個簡單的「個人名片」應用程式：

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(BusinessCardApp());
}

class BusinessCardApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '個人名片',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        fontFamily: 'Roboto',
      ),
      home: BusinessCard(),
      debugShowCheckedModeBanner: false,
    );
  }
}

class BusinessCard extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.teal,
      body: SafeArea(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // 頭像
            CircleAvatar(
              radius: 50.0,
              backgroundImage: AssetImage('images/avatar.jpg'),
            ),
            SizedBox(height: 20.0),
            
            // 姓名
            Text(
              '張小明',
              style: TextStyle(
                fontSize: 32.0,
                color: Colors.white,
                fontWeight: FontWeight.bold,
                fontFamily: 'Pacifico',
              ),
            ),
            
            // 職稱
            Text(
              'FLUTTER 開發者',
              style: TextStyle(
                fontSize: 16.0,
                color: Colors.teal.shade100,
                fontWeight: FontWeight.bold,
                letterSpacing: 2.5,
              ),
            ),
            
            SizedBox(height: 20.0),
            
            // 分隔線
            Container(
              width: 150.0,
              height: 1.0,
              color: Colors.teal.shade100,
            ),
            
            SizedBox(height: 20.0),
            
            // 聯絡資訊
            Card(
              margin: EdgeInsets.symmetric(vertical: 10.0, horizontal: 25.0),
              child: ListTile(
                leading: Icon(
                  Icons.phone,
                  color: Colors.teal,
                ),
                title: Text(
                  '+886 912 345 678',
                  style: TextStyle(
                    color: Colors.teal.shade900,
                    fontFamily: 'Source Sans Pro',
                    fontSize: 16.0,
                  ),
                ),
              ),
            ),
            
            Card(
              margin: EdgeInsets.symmetric(vertical: 10.0, horizontal: 25.0),
              child: ListTile(
                leading: Icon(
                  Icons.email,
                  color: Colors.teal,
                ),
                title: Text(
                  'ming@example.com',
                  style: TextStyle(
                    color: Colors.teal.shade900,
                    fontFamily: 'Source Sans Pro',
                    fontSize: 16.0,
                  ),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### 新增資源檔案

1. 在專案根目錄建立 `images` 資料夾
2. 加入頭像圖片 `avatar.jpg`
3. 修改 `pubspec.yaml`：

```yaml
flutter:
  uses-material-design: true
  
  # 加入資源檔案
  assets:
    - images/
  
  # 自訂字型 (可選)
  fonts:
    - family: Pacifico
      fonts:
        - asset: fonts/Pacifico-Regular.ttf
    - family: Source Sans Pro
      fonts:
        - asset: fonts/SourceSansPro-Regular.ttf
```

------

## 🎨 Flutter 基礎概念

### 1. Widget 是一切

Flutter 中的所有元素都是 Widget：

```dart
// 文字 Widget
Text('Hello Flutter')

// 按鈕 Widget
ElevatedButton(
  onPressed: () => print('按鈕被點擊！'),
  child: Text('點我'),
)

// 容器 Widget
Container(
  width: 100,
  height: 100,
  color: Colors.blue,
  child: Center(child: Text('容器')),
)
```

### 2. StatelessWidget vs StatefulWidget

**StatelessWidget（無狀態）：**

```dart
class WelcomeText extends StatelessWidget {
  final String name;
  
  WelcomeText({required this.name});
  
  @override
  Widget build(BuildContext context) {
    return Text('歡迎, $name!');
  }
}
```

**StatefulWidget（有狀態）：**

```dart
class Counter extends StatefulWidget {
  @override
  _CounterState createState() => _CounterState();
}

class _CounterState extends State<Counter> {
  int count = 0;
  
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Text('計數: $count'),
        ElevatedButton(
          onPressed: () {
            setState(() {
              count++;
            });
          },
          child: Text('增加'),
        ),
      ],
    );
  }
}
```

### 3. 基本佈局

**Column（垂直排列）：**

```dart
Column(
  children: [
    Text('第一個'),
    Text('第二個'),
    Text('第三個'),
  ],
)
```

**Row（水平排列）：**

```dart
Row(
  children: [
    Icon(Icons.star),
    Text('評分'),
    Text('5.0'),
  ],
)
```

**Container（容器）：**

```dart
Container(
  padding: EdgeInsets.all(16.0),
  margin: EdgeInsets.all(8.0),
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(8.0),
  ),
  child: Text('樣式化容器'),
)
```

------

## 🔥 熱重載 (Hot Reload)

Flutter 最強大的功能之一就是熱重載：

### 什麼是熱重載？

- 在不重新啟動應用程式的情況下，即時看到程式碼變更
- 保持應用程式狀態
- 大幅提高開發效率

### 如何使用？

1. **VS Code**: 儲存檔案 (`Ctrl/Cmd + S`)
2. **Android Studio**: 點擊熱重載按鈕或 `Ctrl/Cmd + \`
3. **終端機**: 輸入 `r`

### 熱重載的限制

以下情況需要熱重啟 (Hot Restart)：

- 修改 `main()` 函數
- 更改全域變數初始化
- 修改 enum 定義
- 更改泛型類型宣告

------

## 📦 套件管理

### pubspec.yaml 檔案

```yaml
name: my_first_app
description: A new Flutter project.

# 版本資訊
version: 1.0.0+1

environment:
  sdk: ">=2.12.0 <3.0.0"

# 相依套件
dependencies:
  flutter:
    sdk: flutter
  
  # UI 套件
  cupertino_icons: ^1.0.2
  google_fonts: ^2.1.0
  
  # 網路請求
  http: ^0.13.3
  
  # 狀態管理
  provider: ^6.0.1

# 開發用套件
dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^1.0.0

# 資源檔案
flutter:
  uses-material-design: true
  assets:
    - images/
  fonts:
    - family: Roboto
      fonts:
        - asset: fonts/Roboto-Regular.ttf
```

### 安裝套件

```bash
# 安裝 pubspec.yaml 中定義的套件
flutter pub get

# 新增套件
flutter pub add http
flutter pub add provider

# 升級套件
flutter pub upgrade
```

### 常用套件推薦

**UI 增強：**

- `google_fonts`: Google 字型
- `flutter_svg`: SVG 支援
- `cached_network_image`: 圖片快取

**功能套件：**

- `http`: HTTP 請求
- `shared_preferences`: 本地儲存
- `path_provider`: 檔案路徑

**狀態管理：**

- `provider`: 簡單狀態管理
- `riverpod`: 進階狀態管理
- `bloc`: 業務邏輯組件

------

## 🎯 實作練習

### 練習 1：計算機應用程式

建立一個簡單的計算機：

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(CalculatorApp());
}

class CalculatorApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '簡易計算機',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: Calculator(),
    );
  }
}

class Calculator extends StatefulWidget {
  @override
  _CalculatorState createState() => _CalculatorState();
}

class _CalculatorState extends State<Calculator> {
  String display = '0';
  double num1 = 0;
  double num2 = 0;
  String operator = '';
  bool shouldResetDisplay = false;

  void buttonPressed(String text) {
    setState(() {
      if (text == 'C') {
        // 清除
        display = '0';
        num1 = 0;
        num2 = 0;
        operator = '';
      } else if (text == '+' || text == '-' || text == '×' || text == '÷') {
        // 運算符
        num1 = double.parse(display);
        operator = text;
        shouldResetDisplay = true;
      } else if (text == '=') {
        // 計算結果
        num2 = double.parse(display);
        double result = 0;
        
        switch (operator) {
          case '+':
            result = num1 + num2;
            break;
          case '-':
            result = num1 - num2;
            break;
          case '×':
            result = num1 * num2;
            break;
          case '÷':
            result = num2 != 0 ? num1 / num2 : 0;
            break;
        }
        
        display = result.toString();
        shouldResetDisplay = true;
      } else {
        // 數字輸入
        if (shouldResetDisplay || display == '0') {
          display = text;
          shouldResetDisplay = false;
        } else {
          display += text;
        }
      }
    });
  }

  Widget buildButton(String text, Color color) {
    return Expanded(
      child: Container(
        margin: EdgeInsets.all(8),
        child: ElevatedButton(
          style: ElevatedButton.styleFrom(
            primary: color,
            padding: EdgeInsets.all(20),
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(10),
            ),
          ),
          onPressed: () => buttonPressed(text),
          child: Text(
            text,
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('簡易計算機'),
        centerTitle: true,
      ),
      body: Column(
        children: [
          // 顯示螢幕
          Expanded(
            flex: 2,
            child: Container(
              width: double.infinity,
              padding: EdgeInsets.all(20),
              color: Colors.black,
              child: Align(
                alignment: Alignment.bottomRight,
                child: Text(
                  display,
                  style: TextStyle(
                    color: Colors.white,
                    fontSize: 48,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),
            ),
          ),
          
          // 按鈕區域
          Expanded(
            flex: 3,
            child: Column(
              children: [
                Expanded(
                  child: Row(
                    children: [
                      buildButton('C', Colors.red),
                      buildButton('±', Colors.grey),
                      buildButton('%', Colors.grey),
                      buildButton('÷', Colors.orange),
                    ],
                  ),
                ),
                Expanded(
                  child: Row(
                    children: [
                      buildButton('7', Colors.grey[800]!),
                      buildButton('8', Colors.grey[800]!),
                      buildButton('9', Colors.grey[800]!),
                      buildButton('×', Colors.orange),
                    ],
                  ),
                ),
                Expanded(
                  child: Row(
                    children: [
                      buildButton('4', Colors.grey[800]!),
                      buildButton('5', Colors.grey[800]!),
                      buildButton('6', Colors.grey[800]!),
                      buildButton('-', Colors.orange),
                    ],
                  ),
                ),
                Expanded(
                  child: Row(
                    children: [
                      buildButton('1', Colors.grey[800]!),
                      buildButton('2', Colors.grey[800]!),
                      buildButton('3', Colors.grey[800]!),
                      buildButton('+', Colors.orange),
                    ],
                  ),
                ),
                Expanded(
                  child: Row(
                    children: [
                      Expanded(
                        flex: 2,
                        child: Container(
                          margin: EdgeInsets.all(8),
                          child: ElevatedButton(
                            style: ElevatedButton.styleFrom(
                              primary: Colors.grey[800],
                              padding: EdgeInsets.all(20),
                              shape: RoundedRectangleBorder(
                                borderRadius: BorderRadius.circular(10),
                              ),
                            ),
                            onPressed: () => buttonPressed('0'),
                            child: Text(
                              '0',
                              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
                            ),
                          ),
                        ),
                      ),
                      buildButton('.', Colors.grey[800]!),
                      buildButton('=', Colors.orange),
                    ],
                  ),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}
```

### 練習 2：登入功能練習

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(LoginApp());
}

class LoginApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '登入系統',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: LoginScreen(),
      debugShowCheckedModeBanner: false, // 隱藏右上角的 debug 標籤
    );
  }
}

class LoginScreen extends StatefulWidget {
  @override
  _LoginScreenState createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  // 控制器用於獲取輸入的文字
  TextEditingController usernameController = TextEditingController();
  TextEditingController passwordController = TextEditingController();
  
  // 狀態變數
  bool isPasswordVisible = false; // 控制密碼顯示/隱藏
  bool isLoading = false; // 控制登入按鈕的載入狀態
  String errorMessage = ''; // 錯誤訊息
  
  // 預設的帳號密碼
  final String correctUsername = 'admin';
  final String correctPassword = '19831203';

  // 登入函數
  void login() async {
    String username = usernameController.text.trim();
    String password = passwordController.text.trim();
    
    // 清除之前的錯誤訊息
    setState(() {
      errorMessage = '';
      isLoading = true;
    });
    
    // 模擬網路請求延遲
    await Future.delayed(Duration(seconds: 2));
    
    // 驗證帳號密碼
    if (username.isEmpty || password.isEmpty) {
      setState(() {
        errorMessage = '請輸入帳號和密碼';
        isLoading = false;
      });
      return;
    }
    
    if (username == correctUsername && password == correctPassword) {
      // 登入成功
      setState(() {
        isLoading = false;
      });
      
      // 顯示成功訊息
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('登入成功！歡迎回來'),
          backgroundColor: Colors.green,
          duration: Duration(seconds: 2),
        ),
      );
      
      // 導航到主頁面
      Navigator.pushReplacement(
        context,
        MaterialPageRoute(builder: (context) => HomeScreen(username: username)),
      );
    } else {
      // 登入失敗
      setState(() {
        errorMessage = '帳號或密碼錯誤';
        isLoading = false;
      });
      
      // 清空密碼欄位
      passwordController.clear();
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.grey[100],
      body: SafeArea(
        child: Center(
          child: SingleChildScrollView(
            padding: EdgeInsets.all(24.0),
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                // Logo 或標題區域
                Container(
                  width: 120,
                  height: 120,
                  decoration: BoxDecoration(
                    color: Colors.blue,
                    borderRadius: BorderRadius.circular(60),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.blue.withOpacity(0.3),
                        spreadRadius: 5,
                        blurRadius: 15,
                        offset: Offset(0, 3),
                      ),
                    ],
                  ),
                  child: Icon(
                    Icons.lock,
                    size: 60,
                    color: Colors.white,
                  ),
                ),
                
                SizedBox(height: 40),
                
                // 標題
                Text(
                  'Welcome Back',
                  style: TextStyle(
                    fontSize: 32,
                    fontWeight: FontWeight.bold,
                    color: Colors.grey[800],
                  ),
                ),
                
                SizedBox(height: 8),
                
                Text(
                  'Please sign in to continue',
                  style: TextStyle(
                    fontSize: 16,
                    color: Colors.grey[600],
                  ),
                ),
                
                SizedBox(height: 40),
                
                // 帳號輸入欄位
                Container(
                  decoration: BoxDecoration(
                    color: Colors.white,
                    borderRadius: BorderRadius.circular(15),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.grey.withOpacity(0.1),
                        spreadRadius: 1,
                        blurRadius: 10,
                        offset: Offset(0, 1),
                      ),
                    ],
                  ),
                  child: TextField(
                    controller: usernameController,
                    decoration: InputDecoration(
                      hintText: 'Username',
                      prefixIcon: Icon(Icons.person, color: Colors.grey[600]),
                      border: OutlineInputBorder(
                        borderRadius: BorderRadius.circular(15),
                        borderSide: BorderSide.none,
                      ),
                      contentPadding: EdgeInsets.symmetric(horizontal: 20, vertical: 16),
                    ),
                  ),
                ),
                
                SizedBox(height: 20),
                
                // 密碼輸入欄位
                Container(
                  decoration: BoxDecoration(
                    color: Colors.white,
                    borderRadius: BorderRadius.circular(15),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.grey.withOpacity(0.1),
                        spreadRadius: 1,
                        blurRadius: 10,
                        offset: Offset(0, 1),
                      ),
                    ],
                  ),
                  child: TextField(
                    controller: passwordController,
                    obscureText: !isPasswordVisible, // 控制密碼顯示
                    decoration: InputDecoration(
                      hintText: 'Password (Hint: 19831203)',
                      prefixIcon: Icon(Icons.lock, color: Colors.grey[600]),
                      suffixIcon: IconButton(
                        icon: Icon(
                          isPasswordVisible ? Icons.visibility : Icons.visibility_off,
                          color: Colors.grey[600],
                        ),
                        onPressed: () {
                          setState(() {
                            isPasswordVisible = !isPasswordVisible;
                          });
                        },
                      ),
                      border: OutlineInputBorder(
                        borderRadius: BorderRadius.circular(15),
                        borderSide: BorderSide.none,
                      ),
                      contentPadding: EdgeInsets.symmetric(horizontal: 20, vertical: 16),
                    ),
                    onSubmitted: (_) => login(), // 按下 Enter 鍵時登入
                  ),
                ),
                
                SizedBox(height: 10),
                
                // 錯誤訊息顯示
                if (errorMessage.isNotEmpty)
                  Container(
                    width: double.infinity,
                    padding: EdgeInsets.all(12),
                    margin: EdgeInsets.only(bottom: 10),
                    decoration: BoxDecoration(
                      color: Colors.red[50],
                      borderRadius: BorderRadius.circular(10),
                      border: Border.all(color: Colors.red[200]!),
                    ),
                    child: Row(
                      children: [
                        Icon(Icons.error, color: Colors.red, size: 20),
                        SizedBox(width: 8),
                        Expanded(
                          child: Text(
                            errorMessage,
                            style: TextStyle(
                              color: Colors.red[700],
                              fontSize: 14,
                            ),
                          ),
                        ),
                      ],
                    ),
                  ),
                
                SizedBox(height: 30),
                
                // 登入按鈕
                Container(
                  width: double.infinity,
                  height: 55,
                  child: ElevatedButton(
                    onPressed: isLoading ? null : login,
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.blue,
                      foregroundColor: Colors.white,
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(15),
                      ),
                      elevation: 3,
                    ),
                    child: isLoading
                        ? Row(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              SizedBox(
                                width: 20,
                                height: 20,
                                child: CircularProgressIndicator(
                                  valueColor: AlwaysStoppedAnimation<Color>(Colors.white),
                                  strokeWidth: 2,
                                ),
                              ),
                              SizedBox(width: 10),
                              Text(
                                'Signing in...',
                                style: TextStyle(
                                  fontSize: 16,
                                  fontWeight: FontWeight.bold,
                                  color: Colors.white,
                                ),
                              ),
                            ],
                          )
                        : Text(
                            'Sign In',
                            style: TextStyle(
                              fontSize: 16,
                              fontWeight: FontWeight.bold,
                              color: Colors.white,
                            ),
                          ),
                  ),
                ),
                
                SizedBox(height: 20),
                
                // 提示訊息
                Container(
                  padding: EdgeInsets.all(16),
                  decoration: BoxDecoration(
                    color: Colors.blue[50],
                    borderRadius: BorderRadius.circular(10),
                    border: Border.all(color: Colors.blue[200]!),
                  ),
                  child: Column(
                    children: [
                      Row(
                        children: [
                          Icon(Icons.info, color: Colors.blue, size: 20),
                          SizedBox(width: 8),
                          Text(
                            'Demo Account',
                            style: TextStyle(
                              fontWeight: FontWeight.bold,
                              color: Colors.blue[700],
                            ),
                          ),
                        ],
                      ),
                      SizedBox(height: 8),
                      Text(
                        'Username: admin\nPassword: 19831203',
                        style: TextStyle(
                          color: Colors.blue[600],
                          fontSize: 14,
                        ),
                      ),
                    ],
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  @override
  void dispose() {
    // 釋放控制器資源
    usernameController.dispose();
    passwordController.dispose();
    super.dispose();
  }
}

// 登入成功後的主頁面
class HomeScreen extends StatelessWidget {
  final String username;
  
  const HomeScreen({Key? key, required this.username}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Dashboard'),
        centerTitle: true,
        actions: [
          IconButton(
            icon: Icon(Icons.logout),
            onPressed: () {
              // 登出功能
              showDialog(
                context: context,
                builder: (BuildContext context) {
                  return AlertDialog(
                    title: Text('Logout'),
                    content: Text('Are you sure you want to logout?'),
                    actions: [
                      TextButton(
                        child: Text('Cancel'),
                        onPressed: () {
                          Navigator.of(context).pop();
                        },
                      ),
                      TextButton(
                        child: Text('Logout'),
                        onPressed: () {
                          Navigator.of(context).pop();
                          Navigator.pushReplacement(
                            context,
                            MaterialPageRoute(builder: (context) => LoginScreen()),
                          );
                        },
                      ),
                    ],
                  );
                },
              );
            },
          ),
        ],
      ),
      body: Center(
        child: Padding(
          padding: EdgeInsets.all(24.0),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              // 歡迎圖示
              Container(
                width: 100,
                height: 100,
                decoration: BoxDecoration(
                  color: Colors.green,
                  borderRadius: BorderRadius.circular(50),
                  boxShadow: [
                    BoxShadow(
                      color: Colors.green.withOpacity(0.3),
                      spreadRadius: 5,
                      blurRadius: 15,
                      offset: Offset(0, 3),
                    ),
                  ],
                ),
                child: Icon(
                  Icons.check_circle,
                  size: 50,
                  color: Colors.white,
                ),
              ),
              
              SizedBox(height: 30),
              
              // 歡迎訊息
              Text(
                'Welcome, $username!',
                style: TextStyle(
                  fontSize: 28,
                  fontWeight: FontWeight.bold,
                  color: Colors.grey[800],
                ),
              ),
              
              SizedBox(height: 10),
              
              Text(
                'You have successfully logged in',
                style: TextStyle(
                  fontSize: 16,
                  color: Colors.grey[600],
                ),
              ),
              
              SizedBox(height: 40),
              
              // 功能卡片
              Card(
                elevation: 5,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(15),
                ),
                child: Padding(
                  padding: EdgeInsets.all(20),
                  child: Column(
                    children: [
                      Row(
                        children: [
                          Icon(Icons.account_circle, color: Colors.blue, size: 24),
                          SizedBox(width: 10),
                          Text(
                            'Account Information',
                            style: TextStyle(
                              fontSize: 18,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                        ],
                      ),
                      SizedBox(height: 15),
                      Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Text('Username:'),
                          Text(
                            username,
                            style: TextStyle(fontWeight: FontWeight.bold),
                          ),
                        ],
                      ),
                      SizedBox(height: 10),
                      Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Text('Login Time:'),
                          Text(
                            '${DateTime.now().hour}:${DateTime.now().minute.toString().padLeft(2, '0')}',
                            style: TextStyle(fontWeight: FontWeight.bold),
                          ),
                        ],
                      ),
                      SizedBox(height: 10),
                      Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Text('Status:'),
                          Container(
                            padding: EdgeInsets.symmetric(horizontal: 8, vertical: 4),
                            decoration: BoxDecoration(
                              color: Colors.green,
                              borderRadius: BorderRadius.circular(12),
                            ),
                            child: Text(
                              'Online',
                              style: TextStyle(
                                color: Colors.white,
                                fontSize: 12,
                                fontWeight: FontWeight.bold,
                              ),
                            ),
                          ),
                        ],
                      ),
                    ],
                  ),
                ),
              ),
              
              SizedBox(height: 30),
              
              // 登出按鈕
              ElevatedButton.icon(
                onPressed: () {
                  Navigator.pushReplacement(
                    context,
                    MaterialPageRoute(builder: (context) => LoginScreen()),
                  );
                },
                icon: Icon(Icons.logout),
                label: Text('Logout'),
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.red,
                  foregroundColor: Colors.white,
                  padding: EdgeInsets.symmetric(horizontal: 30, vertical: 12),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10),
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

------

## 🚧 常見問題與解決方案

### 1. Flutter Doctor 問題

**問題：Android toolchain 未安裝**

```bash
# 解決方案：安裝 Android Studio 並接受授權
flutter doctor --android-licenses
```

**問題：iOS toolchain 未安裝 (macOS)**

```bash
# 解決方案：安裝 Xcode 命令列工具
xcode-select --install
```

### 2. 建置問題

**問題：Gradle 建置失敗**

```bash
# 清理建置快取
flutter clean
flutter pub get
flutter run
```

**問題：套件版本衝突**

```bash
# 升級所有套件
flutter pub upgrade --major-versions
```

### 3. 模擬器問題

**Android 模擬器太慢：**

- 確保啟用 Hardware Acceleration
- 分配足夠的 RAM (建議 4GB+)
- 使用 x86_64 映像檔

**iOS 模擬器問題：**

- 重設模擬器：Device > Erase All Content and Settings
- 重啟 Xcode 和模擬器

### 4. 熱重載不工作

**可能原因：**

- 語法錯誤
- 修改了 main() 函數
- Widget 建構子參數型別改變

**解決方案：**

- 修正語法錯誤
- 執行熱重啟 (Hot Restart)
- 完全重新啟動應用程式

------

## 